{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport iziToast from 'izitoast';\nimport axios from 'axios';\n\nconst form = document.querySelector('.feedback-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.wrap-loader');\n\n// let searchBar = '';\n\naxios.defaults.baseURL = 'https://pixabay.com/';\nconst endpoint = 'api/';\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nform.addEventListener('submit', onSearch);\n\nasync function fetchImages(searchBar) {\n  //   const searchParams = new URLSearchParams({\n  //     key: '42046594-dc9dc59be7e95573d854c379a',\n  //     q: `${searchBar}`,\n  //     image_type: 'photo',\n  //     orientation: 'horizontal',\n  //     safesearch: 'true',\n  //     per_page: 9,\n  //   });\n\n  const response = await axios.get(`${endpoint}`, {\n    params: {\n      key: '42046594-dc9dc59be7e95573d854c379a',\n      q: `${searchBar}`,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      per_page: 9,\n    },\n  });\n\n  return response.data;\n}\n\nasync function onSearch(e) {\n  e.preventDefault();\n\n  const form = e.currentTarget;\n  let searchBar = form.elements.search.value.trim();\n  loader.classList.remove('hiden');\n\n  try {\n    const { hits } = await fetchImages(searchBar);\n\n    if (hits.length === 0) {\n      iziToast.show({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: '#FAFAFB',\n        messageSize: '16px',\n        backgroundColor: '#EF4040',\n        position: 'topRight',\n      });\n    }\n\n    createGallery(hits);\n\n    gallery.innerHTML = createGallery(hits);\n\n    lightbox.refresh();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    loader.classList.add('hiden');\n    form.reset;\n  }\n  // finally() => {\n  //     loader.classList.add('hiden');\n  //   };\n}\n\n// fetchImages();\n//     .then(response => {\n//       console.log(response.data);\n//       if (response.data.hits.length === 0) {\n//         iziToast.show({\n//           message:\n//             'Sorry, there are no images matching your search query. Please try again!',\n//           messageColor: '#FAFAFB',\n//           messageSize: '16px',\n//           backgroundColor: '#EF4040',\n//           position: 'topRight',\n//         });\n//       }\n\n//       gallery.innerHTML = createGallery(response.data.hits);\n\n//       lightbox.refresh();\n//     })\n//     .catch(error => {\n//       console.log(error);\n//     })\n//     .finally(() => {\n//       loader.classList.add('hiden');\n//     });\n\nfunction createGallery(arr) {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<li class=\"gallery-item\">\n           <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img\n            class=\"gallery-image\"\n            src=\"${webformatURL}\"\n            alt=\"${tags}\"\n          />\n\n            <ul class = \"description-list\">\n\n              <li class = \"description-item\">\n               <h3 class = \"description-title\">Likes</h3>\n               <p class = \"description-text\">${likes}</p>\n              </li>\n\n              <li class = \"description-item\">\n               <h3 class = \"description-title\">Views</h3>\n               <p class = \"description-text\">${views}</p>\n              </li>\n          \n              <li class = \"description-item\">\n               <h3 class = \"description-title\">Comments</h3>\n               <p class = \"description-text\">${comments}</p>\n              </li>\n\n              <li class = \"description-item\">\n               <h3 class = \"description-title\">Downloads</h3>\n               <p class = \"description-text\">${downloads}</p>\n               </li>\n          \n             </ul>\n           </a>\n\n      </li>\n      `\n    )\n    .join('');\n}\n"],"names":["form","gallery","loader","axios","endpoint","lightbox","SimpleLightbox","onSearch","fetchImages","searchBar","e","hits","iziToast","createGallery","error","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"owBAIA,MAAMA,EAAO,SAAS,cAAc,gBAAgB,EAC9CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,cAAc,EAIpDC,EAAM,SAAS,QAAU,uBACzB,MAAMC,EAAW,OAEjB,IAAIC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAChB,CAAC,EAEDN,EAAK,iBAAiB,SAAUO,CAAQ,EAExC,eAAeC,EAAYC,EAAW,CAqBpC,OAXiB,MAAMN,EAAM,IAAI,GAAGC,IAAY,CAC9C,OAAQ,CACN,IAAK,qCACL,EAAG,GAAGK,IACN,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,CACX,CACL,CAAG,GAEe,IAClB,CAEA,eAAeF,EAASG,EAAG,CACzBA,EAAE,eAAc,EAEhB,MAAMV,EAAOU,EAAE,cACf,IAAID,EAAYT,EAAK,SAAS,OAAO,MAAM,OAC3CE,EAAO,UAAU,OAAO,OAAO,EAE/B,GAAI,CACF,KAAM,CAAE,KAAAS,CAAM,EAAG,MAAMH,EAAYC,CAAS,EAExCE,EAAK,SAAW,GAClBC,EAAS,KAAK,CACZ,QACE,2EACF,aAAc,UACd,YAAa,OACb,gBAAiB,UACjB,SAAU,UAClB,CAAO,EAGHC,EAAcF,CAAI,EAElBV,EAAQ,UAAYY,EAAcF,CAAI,EAEtCN,EAAS,QAAO,CACjB,OAAQS,EAAP,CACA,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRZ,EAAO,UAAU,IAAI,OAAO,EAC5BF,EAAK,KACN,CAIH,CA2BA,SAASa,EAAcE,EAAK,CAC1B,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA,2CAC+BL;AAAA;AAAA;AAAA,mBAGxBD;AAAA,mBACAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CAO4BC;AAAA;AAAA;AAAA;AAAA;AAAA,+CAKAC;AAAA;AAAA;AAAA;AAAA;AAAA,+CAKAC;AAAA;AAAA;AAAA;AAAA;AAAA,+CAKAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAQ1C,EACA,KAAK,EAAE,CACZ"}